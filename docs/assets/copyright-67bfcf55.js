import{i as h,_ as y,d as C,o as w,c as E,a as g,b as o,w as l,F,e as m}from"./index-c98f9125.js";import{E as _,a as T,b as k}from"./el-table-column-271ee003.js";import{E as A,a as P,b as v,c as I}from"./el-button-1faef406.js";import{E as N}from"./el-pagination-37a4c347.js";import"./el-select-68f3d92a.js";import{c as U}from"./cloneDeep-c9f0cd72.js";import{E as r}from"./index-a8cc67c8.js";import"./validator-0f117868.js";const z=e=>h.request({url:"api/copyright/page",method:"post",data:e}),$=e=>h.request({url:"api/copyright/add",method:"post",data:e}),B=e=>h.request({url:"api/copyright/edit",method:"post",data:e}),q=C({data(){return{copyrights:[],page:{total:0,current:1,size:2},dialogFormVisible:!1,dialogFormVisible1:!1,copyright:{attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:0},formLabelWidth:80}},mounted(){this.getAdcatesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.copyright=U(e)},getAdcatesPage(e){z({current:e,size:2}).then(i=>{console.log(i);const u=i.data.page;this.copyrights=u.records,this.page=u}).catch(i=>{console.log(i)})},currentchange(e){this.getAdcatesPage(e),this.page.current=e},cancle(){this.dialogFormVisible1=!1},dele(){this.dialogFormVisible1=!0},del(e){const t={id:e};adCateDelId(t).then(i=>{if(i.success)this.getAdcatesPage(this.page.current);else return console.log(i.msg),!1}).catch(i=>{}),this.dialogFormVisible1=!1},toAdd(){this.dialogFormVisible=!0},save(){const e=this.copyright;e.id==0?$(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAdcatesPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")}):B(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAdcatesPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")})}}}),D={class:"copyright"},L={class:"copyright-tools"},M={class:"dialog-footer"};function W(e,t,i,u,j,G){const p=A,s=k,c=_,f=N,d=P,n=v,b=I,V=T;return w(),E(F,null,[g("div",D,[g("div",L,[o(p,{type:"danger",onClick:e.toAdd,round:""},{default:l(()=>[m("添加")]),_:1},8,["onClick"])]),o(c,{data:e.copyrights,style:{width:"100%"}},{default:l(()=>[o(s,{fixed:"",prop:"id",label:"编号",width:"100"}),o(s,{prop:"attachment",label:"佐证材料",width:"160"}),o(s,{prop:"copyrightNo",label:"著作权编号",width:"140"}),o(s,{prop:"finishTime",label:"完成时间",width:"140"}),o(s,{prop:"name",label:"著作权名称",width:"140"}),o(s,{prop:"publishTime",label:"首次发表时间",width:"140"}),o(s,{prop:"userId",label:"著作权人：第一位",width:"140"}),o(s,{fixed:"right",label:"操作",width:"120"},{default:l(a=>[o(p,{link:"",type:"primary",size:"small",onClick:H=>e.toEdit(a.row)},{default:l(()=>[m("修改")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{layout:"prev,pager,next","page-size":e.page.size,onCurrentChange:e.currentchange,total:e.page.total},null,8,["page-size","onCurrentChange","total"])]),o(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[7]||(t[7]=a=>e.dialogFormVisible=a),title:"著作权编辑"},{footer:l(()=>[g("span",M,[o(p,{onClick:t[6]||(t[6]=a=>e.dialogFormVisible=!1)},{default:l(()=>[m("取消")]),_:1}),o(p,{type:"primary",onClick:e.save},{default:l(()=>[m(" 保存 ")]),_:1},8,["onClick"])])]),default:l(()=>[o(b,{model:e.copyright},{default:l(()=>[o(n,{label:"佐证材料","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.attachment,"onUpdate:modelValue":t[0]||(t[0]=a=>e.adCate.attachment=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(n,{label:"著作权编号","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.copyrightNo,"onUpdate:modelValue":t[1]||(t[1]=a=>e.adCate.copyrightNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(n,{label:"完成时间","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.finishTime,"onUpdate:modelValue":t[2]||(t[2]=a=>e.adCate.finishTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(n,{label:"著作权名称","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.name,"onUpdate:modelValue":t[3]||(t[3]=a=>e.adCate.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(n,{label:"首次发表时间","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.publishTime,"onUpdate:modelValue":t[4]||(t[4]=a=>e.adCate.publishTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(n,{label:"著作权人：第一位","label-width":140},{default:l(()=>[o(d,{modelValue:e.adCate.userId,"onUpdate:modelValue":t[5]||(t[5]=a=>e.adCate.userId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Z=y(q,[["render",W]]);export{Z as default};
