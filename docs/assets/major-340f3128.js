import{i as m,_ as w,d as M,o as C,c as _,a as g,b as a,w as l,F as E,e as n}from"./index-c98f9125.js";import{E as I,a as k,b as F}from"./el-table-column-271ee003.js";import{E as D,a as y,b as v,c as P}from"./el-button-1faef406.js";import{E as z}from"./el-pagination-37a4c347.js";import"./el-select-68f3d92a.js";/* empty css                   */import{c as N}from"./cloneDeep-c9f0cd72.js";import{E as i}from"./index-a8cc67c8.js";import"./validator-0f117868.js";const T=e=>m.request({url:"api/major/page",method:"post",data:e}),$=e=>m.request({url:"api/major/add",method:"post",data:e}),q=e=>m.request({url:"api/major/delete",params:e}),L=e=>m.request({url:"api/major/edit",method:"post",data:e}),U=e=>m.request({url:"api/major/colums",params}),W=M({data(){return{majors:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,Major:{id:0,majorName:"",majorDesc:"",departId:0,createTime:"",updateTime:"",deleted:0,schoolId:0},MajorColums:{colums:""},formLabelWidth:80}},mounted(){this.getMajorsPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.Major=N(e)},getMajorsPage(e){T({current:e,size:4}).then(r=>{const c=r.data.page;this.majors=c.records,this.page=c}).catch(r=>{console.log(r)})},getMajorsColumn(e){U().then(o=>{const r=o.params.page;this.majors=r.records,this.page=r}).catch(o=>{console.log(o)})},currentchange(e){this.getMajorsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),q({id:e}).then(r=>{if(r.success)this.getMajorsPage(this.page.current);else return console.log(r.msg),!1}).catch(r=>{})},toAdd(){this.dialogFormVisible=!0},save(){const e=this.Major;e.id==0?$(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getMajorsPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")}):L(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getMajorsPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")})}}}),B={class:"majors"},A={class:"major-tools"},G={class:"dialog-footer"};function H(e,o,r,c,J,K){const d=D,s=F,h=I,f=z,p=y,u=v,j=P,b=k;return C(),_(E,null,[g("div",B,[g("div",A,[a(d,{type:"warning",onClick:e.toAdd},{default:l(()=>[n("添加")]),_:1},8,["onClick"])]),a(h,{data:e.majors,style:{width:"100%"}},{default:l(()=>[a(s,{fixed:"",prop:"id",width:"150"}),a(s,{prop:"majorName",label:"专业名称",width:"120"}),a(s,{prop:"majorDesc",label:"专业描述",width:"120"}),a(s,{prop:"departId",label:"学院ID",width:"120"}),a(s,{prop:"createTime",label:"创建时间",width:"120"}),a(s,{prop:"updateTime",label:"更新时间",width:"120"}),a(s,{prop:"deleted",label:"删除",width:"120"}),a(s,{prop:"schoolId",label:"学校ID",width:"120"}),a(s,{fixed:"right",label:"功能管理",width:"120"},{default:l(t=>[a(d,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(t.row)},{default:l(()=>[n("更新")]),_:2},1032,["onClick"]),a(d,{link:"",type:"primary",size:"small",onClick:V=>e.del(t.row.id)},{default:l(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[5]||(o[5]=t=>e.dialogFormVisible=t),title:"专业信息编辑"},{footer:l(()=>[g("span",G,[a(d,{onClick:o[4]||(o[4]=t=>e.dialogFormVisible=!1)},{default:l(()=>[n("Cancel")]),_:1}),a(d,{type:"primary",onClick:e.save},{default:l(()=>[n("保存 ")]),_:1},8,["onClick"])])]),default:l(()=>[a(j,{model:e.Major},{default:l(()=>[a(u,{label:"专业名称","label-width":e.formLabelWidth},{default:l(()=>[a(p,{modelValue:e.Major.majorName,"onUpdate:modelValue":o[0]||(o[0]=t=>e.Major.majorName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"专业描述","label-width":e.formLabelWidth},{default:l(()=>[a(p,{modelValue:e.Major.majorDesc,"onUpdate:modelValue":o[1]||(o[1]=t=>e.Major.majorDesc=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"学院ID","label-width":e.formLabelWidth},{default:l(()=>[a(p,{modelValue:e.Major.departId,"onUpdate:modelValue":o[2]||(o[2]=t=>e.Major.departId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"学校ID","label-width":e.formLabelWidth},{default:l(()=>[a(p,{modelValue:e.Major.schoolId,"onUpdate:modelValue":o[3]||(o[3]=t=>e.Major.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const oe=w(W,[["render",H]]);export{oe as default};
