import{_ as V,d as A,o as F,c as y,a as l,b as a,w as i,F as T,P as $,e as n,D as d,Q as k,R as S,S as N,T as P}from"./index-c98f9125.js";import{E as z,a as B,b as D}from"./el-table-column-271ee003.js";import{c as M,a as x,b as O,E as U}from"./el-button-1faef406.js";import{A as L,a as Q,b as R,c as W}from"./articleCat5-035f14a0.js";import{c as u}from"./cloneDeep-c9f0cd72.js";import{E as j}from"./index-a5de5c87.js";import{E as r}from"./index-a8cc67c8.js";import"./validator-0f117868.js";const q=A({data(){return{value:"",detailC:{},current:2,total:100,size:10,formInline:{},articleCats:[],page:{total:"100",current:1,size:"10"},dialogFormVisible:!1,dialogFormVisible1:!1,articleCat:{articleCatId:0,content:"",createTime:"",deleted:0,id:0,open:0,title:"",updateTime:"",userinfoId:0},formLabelWidth:98}},created(){},mounted(){this.getArticleCatsPage(1)},methods:{gouser(){this.$router.push({path:"/Newaricle2"})},gofenlei(){this.$router.push({path:"/Newaricle"})},addTask(){this.$router.push({path:"/Newaricle1"})},changeOption(e){console.log("切换了",e),this.$router.push({path:"/"+e})},daohang(e){console.log("aaa",u(e)),this.detailC=u(e),this.dialogFormVisible1=!0},pageChange(e){console.log("113",e)},Find(){this.articleCats1=[],this.articleCats.filter(e=>{e.title.indexOf(this.formInline.title)!==-1&&this.articleCats.push(e),this.articleCats=[],this.articleCats=this.articleCats1})},toEdit(e){this.dialogFormVisible=!0,this.articleCat=u(e),console.log(this.articleCat)},getArticleCatsPage(e){this.articleCats=[];const t={current:this.current,size:this.size};L().then(s=>{console.log("入参",t,s),this.articleCats=s.data.articles}).catch(s=>{console.log(s)})},currentchange(e){this.getArticleCatsPage(e),this.page.current=e},del(e){j.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Q({id:e}).then(s=>{if(s.success){const m=this.articleCats.findIndex(h=>h.id===e);this.articleCats.splice(m,1),this.page.total--,this.articleCats.length===0&&this.page.current>1?this.currentchange(this.page.current-1):this.getArticleCatsPage(this.page.current)}else return console.log(s.msg),!1}).catch(s=>{})}).catch(()=>{})},toAdd(){this.dialogFormVisible=!0,this.resetArticleCat()},save(){const e=this.articleCat;e.id==0?R(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),r(t.msg),this.resetArticleCat();else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")}):W(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),r(t.msg),this.resetArticleCat();else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")})},resetArticleCat(){this.articleCat={articleCatId:0,content:"",createTime:"",deleted:0,id:0,open:0,title:"",updateTime:"",userinfoId:0}}}}),_=e=>(N("data-v-f13127a1"),e=e(),P(),e),G={class:"articleCats"},H=_(()=>l("div",{class:"title"},[l("h1",null,"知识库")],-1)),J=_(()=>l("div",{class:"flex-grow"},null,-1)),K={class:"article-tools"},X={class:"detail"},Y={style:{width:"45vw",height:"100vh"}},Z={class:"title",style:{"font-size":"1.2vw","font-weight":"bold"}},ee={style:{"margin-top":"20px"}},te={style:{width:"40vw","margin-top":"20px"}};function ae(e,t,s,m,h,ie){const c=k,C=S,v=$,b=x,p=O,g=U,E=M,f=D,I=z,w=B;return F(),y(T,null,[l("div",G,[a(v,{"default-active":e.activeIndex,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect},{default:i(()=>[H,J,a(c,{index:"1",onClick:t[0]||(t[0]=o=>e.gouser())},{default:i(()=>[n("用户端")]),_:1}),a(C,{index:"2"},{title:i(()=>[n("文章管理")]),default:i(()=>[a(c,{index:"2-1",onClick:t[1]||(t[1]=o=>e.gofenlei())},{default:i(()=>[n("文章分类")]),_:1}),a(c,{index:"2-2",onClick:t[2]||(t[2]=o=>e.addTask())},{default:i(()=>[n("文章列表")]),_:1})]),_:1})]),_:1},8,["default-active","onSelect"]),l("div",K,[a(E,{inline:!0,model:e.formInline,class:"demo-form-inline"},{default:i(()=>[a(p,null,{default:i(()=>[a(b,{modelValue:e.formInline.title,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formInline.title=o),placeholder:"请输入关键词"},null,8,["modelValue"])]),_:1}),a(p,null,{default:i(()=>[a(g,{type:"primary",onClick:e.Find},{default:i(()=>[n("搜索")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l("div",X,[a(I,{data:e.articleCats,stripe:"",style:{width:"100%"}},{default:i(()=>[a(f,{prop:"title",label:"文章标题",align:"center"}),a(f,{label:"操作"},{default:i(o=>[a(g,{type:"primary",size:"small",onClick:le=>e.daohang(o.row),plain:""},{default:i(()=>[n("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),a(w,{modelValue:e.dialogFormVisible1,"onUpdate:modelValue":t[4]||(t[4]=o=>e.dialogFormVisible1=o),title:"查看"},{default:i(()=>[l("div",Y,[l("div",Z,d(e.detailC.title),1),l("div",ee,"更新时间"+d(e.detailC.createTime),1),l("div",te,d(e.detailC.content),1)])]),_:1},8,["modelValue"])],64)}const he=V(q,[["render",ae],["__scopeId","data-v-f13127a1"]]);export{he as default};
