import{g as k,i as p,_ as y,d as U,o as L,c as T,a as b,b as l,w as o,F as W,e as s}from"./index-c98f9125.js";import{E,a as v,b as F}from"./el-table-column-271ee003.js";import{E as I,a as P,b as z,c as A}from"./el-button-1faef406.js";import{E as D}from"./el-pagination-37a4c347.js";import"./el-select-68f3d92a.js";import{c as q}from"./cloneDeep-c9f0cd72.js";import{E as i}from"./index-a8cc67c8.js";import"./validator-0f117868.js";const $=e=>p.request({url:"api/menu-rule/page",method:"post",data:e}),N=e=>p.request({url:"api/menu-rule/delete",method:"get",params:e}),c=e=>p.request({url:"api/menu-rule/add",method:"post",data:e}),j=e=>p.request({url:"api/menu-rule/edit",method:"post",data:e}),h=k.create({baseURL:"http://api.jqrjq.cn",withCredentials:!0});h.interceptors.request.use(e=>e,e=>Promise.reject(e));h.interceptors.response.use(e=>e,e=>Promise.reject(e));const B=U({data(){return{Menurules:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,Menurule:{component:"",createTime:0,exten:0,icon:"",id:"",keepalive:"",menuType:"",name:"",path:0,pid:"",remark:"",status:"",title:"",type:"",updateTime:"",url:"",weigh:""},formLabelWidth:80}},mounted(){this.getAdCatesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.Menurule=q(e)},getAdCatesPage(e){$({current:e,size:2}).then(r=>{console.log(r);const f=r.data.page;this.Menurules=f.records,this.page=f}).catch(r=>{console.log(r)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e),N({id:e}).then(r=>{if(r.success)this.getAdCatesPage(this.page.current);else return console.log(r.msg),!1}).catch(r=>{})},toAdd(){this.dialogFormVisible=!0,this.Menurule={component:"",createTime:0,exten:0,icon:"",id:"",keepalive:"",menuType:"",name:"",path:0,pid:"",remark:"",status:"",title:"",type:"",updateTime:"",url:"",weigh:""}},searchMenurule(){const e=parseInt(this.searchId);if(isNaN(e)){i.warning("请输入有效的ID");return}console.log("Searching Menurule with ID:",e),getOneMenurule(e).then(a=>{if(console.log("Search result:",a),a.success){const r=a.data.records;this.Menurules=[r],this.page={total:1,current:1,size:this.page.size}}else i.error(a.msg)}).catch(a=>{i.error("网络错误，请联系管理员")})},save(){const e=this.Menurule;e.id==0?c(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),i(a.msg);else return i(a.msg),!1}).catch(a=>{i("网络错误联系管理员")}):j(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),i(a.msg);else return i(a.msg),!1}).catch(a=>{i("网络错误联系管理员")})}}}),S={class:"Menurules"},O={class:"Menurule-tools"},R={class:"dialog-footer"};function G(e,a,r,f,H,J){const m=I,u=P,d=F,g=E,V=D,n=z,w=A,M=v;return L(),T(W,null,[b("div",S,[b("div",O,[l(m,{type:"primary",onClick:e.toAdd},{default:o(()=>[s("添加")]),_:1},8,["onClick"]),l(u,{modelValue:e.searchId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchId=t),placeholder:"请输入ID",clearable:"",style:{width:"120px"}},null,8,["modelValue"]),l(m,{type:"primary",onClick:e.searchMenurule},{default:o(()=>[s("搜索")]),_:1},8,["onClick"])]),l(g,{data:e.Menurules,style:{width:"100%"}},{default:o(()=>[l(d,{fixed:"",prop:"component",label:"组件路径",width:"120"}),l(d,{prop:"createTime",label:"创建时间",width:"120"}),l(d,{prop:"extend",label:"扩展属性",width:"120"}),l(d,{prop:"icon",label:"图标",width:"120"}),l(d,{prop:"id",label:"ID",width:"120"}),l(d,{prop:"keepalive",label:"缓存",width:"120"}),l(d,{prop:"menuType",label:"菜单类型",width:"120"}),l(d,{prop:"name",label:"规则名称",width:"120"}),l(d,{prop:"path",label:"路由路径",width:"120"}),l(d,{prop:"remark",label:"备注",width:"120"}),l(d,{prop:"status",label:"状态",width:"120"}),l(d,{prop:"title",label:"标题",width:"120"}),l(d,{prop:"type",label:"类型",width:"120"}),l(d,{prop:"updateTime",label:"更新时间",width:"120"}),l(d,{prop:"url",label:"Url",width:"120"}),l(d,{prop:"weigh",label:"权重",width:"120"}),l(d,{prop:"type",label:"修改操作",width:"120"},{default:o(t=>[l(m,{link:"",type:"primary",size:"small",onClick:C=>e.toEdit(t.row)},{default:o(()=>[s("更新")]),_:2},1032,["onClick"]),l(m,{link:"",type:"primary",size:"small",onClick:C=>e.del(t.row.id)},{default:o(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{background:"",layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(M,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[19]||(a[19]=t=>e.dialogFormVisible=t),title:"编辑表单"},{footer:o(()=>[b("span",R,[l(m,{onClick:a[18]||(a[18]=t=>e.dialogFormVisible=!1)},{default:o(()=>[s("Cancel")]),_:1}),l(m,{type:"primary",onClick:e.save},{default:o(()=>[s(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(w,{model:e.Menurule},{default:o(()=>[l(n,{label:"组件路径","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.component,"onUpdate:modelValue":a[1]||(a[1]=t=>e.Menurule.component=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"创建时间","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.createTime,"onUpdate:modelValue":a[2]||(a[2]=t=>e.Menurule.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"扩展属性","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.extend,"onUpdate:modelValue":a[3]||(a[3]=t=>e.Menurule.extend=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"图标","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.icon,"onUpdate:modelValue":a[4]||(a[4]=t=>e.Menurule.icon=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"ID","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.id,"onUpdate:modelValue":a[5]||(a[5]=t=>e.Menurule.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"缓存","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.keepalive,"onUpdate:modelValue":a[6]||(a[6]=t=>e.Menurule.keepalive=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"菜单类型","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.menuType,"onUpdate:modelValue":a[7]||(a[7]=t=>e.Menurule.menuType=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"规则名称","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.name,"onUpdate:modelValue":a[8]||(a[8]=t=>e.Menurule.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"路由路径","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.path,"onUpdate:modelValue":a[9]||(a[9]=t=>e.Menurule.path=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"上级菜单","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.pid,"onUpdate:modelValue":a[10]||(a[10]=t=>e.Menurule.pid=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"备注","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.remake,"onUpdate:modelValue":a[11]||(a[11]=t=>e.Menurule.remake=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"状态","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.status,"onUpdate:modelValue":a[12]||(a[12]=t=>e.Menurule.status=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"标题","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.title,"onUpdate:modelValue":a[13]||(a[13]=t=>e.Menurule.title=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"类型","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.type,"onUpdate:modelValue":a[14]||(a[14]=t=>e.Menurule.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"更新时间","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.updateTime,"onUpdate:modelValue":a[15]||(a[15]=t=>e.Menurule.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"Url","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.url,"onUpdate:modelValue":a[16]||(a[16]=t=>e.Menurule.url=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"权重","label-width":e.formLabelWidth},{default:o(()=>[l(u,{modelValue:e.Menurule.weigh,"onUpdate:modelValue":a[17]||(a[17]=t=>e.Menurule.weigh=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const le=y(B,[["render",G]]);export{le as default};
